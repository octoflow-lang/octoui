# OctoUI

GPU-native UI rendering engine for [OctoFlow](https://github.com/octoflow-lang/octoflow).

Renders entire UI frames via GPU VM dispatch chains — layout, render, composite as a single `vkQueueSubmit`. Written entirely in `.flow` files. Modern dark window with teal octopus branding.

## Features

- **GPU dispatch chain rendering** — all draw calls batched into 1 GPU submit per frame
- **3 SPIR-V compute kernels** — clear, rectangle, bitmap text (generated by .flow emitters)
- **Columnar widget tree** — parallel arrays, no heap allocation, no GC
- **Dark theme** — DWM dark mode title bar, rounded corners (Win11)
- **Reactive state** — value bindings auto-update widget text
- **Press-to-click** — buttons fire on mouse-down for instant responsiveness
- **Smart idle** — only sleeps when no interaction (zero latency on active frames)

## Quick Start

```bash
octoflow run octoui/examples/counter.flow --allow-read --allow-write --allow-ffi --max-iters 1000000
```

## Architecture

```
vm_dispatch("ui_clear.spv", ...)     // clear framebuffer
vm_dispatch("ui_rect.spv", ...)      // per-widget rectangle
vm_dispatch("ui_text.spv", ...)      // per-glyph bitmap text
vm_build(vm) → single VkCommandBuffer
vm_execute(prog) → single vkQueueSubmit
vm_read_globals → R, G, B channels
window_draw(r, g, b)                 // present to Win32 window
```

All rendering happens on the GPU. CPU handles layout (<20 widgets, negligible cost) and input events.

## Structure

```
octoui/
  kernels/          SPIR-V emitters (.flow) + compiled kernels (.spv)
  engine/           Core: tree, layout, pipeline, dirty, font
  widgets/          Widget library: box, text, button, row, column
  themes/           Color themes (dark)
  platform/         Platform layer (Win32 + input)
  state/            Reactive state management
  examples/         hello.flow, counter.flow
  tests/            18 tests (12 tree + 6 kernel)
  docs/             quickstart, architecture, widgets
```

## Requirements

- OctoFlow compiler (`octoflow.exe`)
- Vulkan-capable GPU with drivers
- Windows 10+ (Win32 + DWM presentation)

## License

Apache 2.0 — see [LICENSE](LICENSE)
