# OctoUI

![License: Apache 2.0](https://img.shields.io/badge/license-Apache%202.0-green)
![Built with OctoFlow](https://img.shields.io/badge/built%20with-OctoFlow-orange)
![Dependencies: 0](https://img.shields.io/badge/dependencies-0-brightgreen)
![Tests: 82 passing](https://img.shields.io/badge/tests-82%20passing-brightgreen)
![Kernels: 3 SPIR-V](https://img.shields.io/badge/kernels-3%20SPIR--V-blue)
![Widgets: 21](https://img.shields.io/badge/widgets-21-blue)

A GPU-native rendering engine — not a widget toolkit wrapper. Layout, render, and
text rendering execute as GPU dispatch chains through
[OctoFlow's](https://github.com/octoflow-lang/octoflow) VM. One `vkQueueSubmit`
per frame. Zero dependencies. Written entirely in `.flow`.

## Why OctoUI

Traditional GUI toolkits render on CPU or wrap platform-native widgets. OctoUI
renders everything on GPU via compute shader dispatch chains — the same
architecture OctoFlow uses for LLM inference, database queries, and compression.

- **One GPU submit per frame** — clear, rect, text batched into single `vkQueueSubmit`
- **Columnar widget tree** — parallel arrays, no heap allocation, no GC
- **3 SPIR-V compute kernels** — clear, rectangle, bitmap text (generated by .flow emitters)
- **Reactive state** — signals auto-propagate to bound widgets
- **Smart idle** — only re-renders on interaction (zero CPU burn when idle)
- **Full keyboard accessibility** — Tab, Space, Enter, arrows, Home/End, Page Up/Down

This is not a toolkit. It's the rendering engine itself.

## Quick Start

Requires [OctoFlow v1.0.0+](https://github.com/octoflow-lang/octoflow/releases/latest).

```bash
octoflow run octoui/examples/counter.flow --allow-read --allow-write --allow-ffi --max-iters 1000000
```

## Widgets

| Category   | Widgets                                                                          |
|------------|----------------------------------------------------------------------------------|
| Core       | Box, Text, Separator, Label, Progress, Tooltip, Notification                     |
| Layout     | Row, Column, Scroll, Section (accordion), Menubar, StatusBar                    |
| Input      | Button, TextInput, Checkbox, Radio, Slider, Toggle, Dropdown, Spinbox, Listbox  |
| Overlay    | Modal, ContextMenu                                                               |
| Text       | TextArea (multi-line, cursor, scroll, readonly)                                  |
| Data       | Table (virtual-list, fixed header), TreeView (hierarchical, expand/collapse), ListView (virtual rendering — thousands of items) |

21 widget types total. All composable.

## Examples

| Example           | What it demonstrates                                     |
|-------------------|----------------------------------------------------------|
| `hello.flow`      | Minimal: text + button                                   |
| `counter.flow`    | Reactive state: button increments text                   |
| `form.flow`       | TextInput + Checkbox + Slider + Radio                    |
| `settings.flow`   | Toggle + Dropdown + Spinbox + Label                      |
| `dashboard.flow`  | Multi-widget layout: progress, labels, buttons           |
| `timer.flow`      | Reactive timer with start/stop/reset                     |
| `tabs.flow`       | Tab container with switchable content panels             |
| `kitchen.flow`    | All 20 widgets in one app                                |
| `long_list.flow`  | ListView: 1000 items, 12 display widgets (virtual)       |
| `dialog.flow`     | Modal dialog: alert, confirm, custom                     |
| `table.flow`      | Data table: 100 rows, keyboard navigation                |
| `explorer.flow`   | TreeView + file hierarchy navigation                     |
| `themes.flow`     | Runtime dark/light theme switching                       |
| `disabled.flow`   | Widget disabled state demonstration                      |
| `login.flow`      | Login form: TextInput + password masking                 |
| `panel.flow`      | Collapsible sections (accordion)                         |
| `menubar.flow`    | Menubar + status bar + dropdown menus                    |
| `contextmenu.flow`| Right-click context menus                                |
| `editor.flow`     | Multi-line text editor with cursor navigation            |
| `logviewer.flow`  | Read-only log viewer with auto-scroll                    |
| `studio.flow`     | OctoUI Studio — WYSIWYG visual builder (palette+canvas)  |

## Architecture

```
Input events (Win32 → CPU → Globals)
          │
          ▼
    Layout (CPU, single pass)
          │
          ▼
    vm_dispatch("ui_clear.spv")   ← clear framebuffer
    vm_dispatch("ui_rect.spv")    ← per-widget rectangles
    vm_dispatch("ui_text.spv")    ← per-glyph bitmap text
          │
          ▼
    vm_build → single VkCommandBuffer
    vm_execute → single vkQueueSubmit
          │
          ▼
    vm_read_globals → R, G, B channels
    window_draw(r, g, b)          ← present to Win32 window
```

All rendering on GPU. CPU handles layout and input — negligible cost for
typical UI widget counts (<200 widgets).

## Structure

```
octoui/
  engine/        Core: tree, layout, pipeline, dirty, font
  kernels/       SPIR-V emitters (.flow) + compiled kernels (.spv)
  widgets/
    core/        box, text, separator, label, progress, tooltip, notification, modal
    input/       button, checkbox, textinput, radio, slider, toggle, dropdown,
                 spinbox, listbox, textarea, contextmenu
    layout/      row, column, scroll, section, menubar, statusbar
    data/        table, treeview, listview
  themes/        dark.flow, light.flow, terminal.flow
  platform/      Win32 window + input events
  state/         Reactive signals + bindings
  examples/      21 example apps
  tests/         82 tests (12 tree + 6 kernel + 5 pipeline + 11 dialog + 12 tabs + 13 dropdown + 12 scrollview + 11 theming)
  docs/          quickstart, architecture, widget reference
```

## Tests

```bash
# Tree tests (12)
octoflow run octoui/tests/test_tree.flow --allow-read --allow-write --max-iters 1000000

# Kernel tests (6)
octoflow run octoui/tests/test_kernels.flow --allow-read --allow-write --allow-ffi --max-iters 1000000

# Pipeline integration tests (5)
octoflow run octoui/tests/test_pipeline.flow --allow-read --allow-write --allow-ffi --max-iters 1000000

# Widget tests (48)
octoflow run octoui/tests/test_dialog.flow --allow-read --allow-write --allow-ffi --max-iters 1000000
octoflow run octoui/tests/test_tabs_panel.flow --allow-read --allow-write --allow-ffi --max-iters 1000000
octoflow run octoui/tests/test_dropdown_tree.flow --allow-read --allow-write --allow-ffi --max-iters 1000000
octoflow run octoui/tests/test_scrollview.flow --allow-read --allow-write --allow-ffi --max-iters 1000000
octoflow run octoui/tests/test_theming.flow --allow-read --allow-write --allow-ffi --max-iters 1000000
```

## Requirements

- OctoFlow compiler — [download](https://github.com/octoflow-lang/octoflow/releases/latest)
- Vulkan-capable GPU with drivers
- Windows 10+ (Win32 + DWM presentation — Linux and web planned)

## Roadmap

- [x] Core engine: GPU dispatch pipeline, columnar tree, reactive state
- [x] Input widgets: Button, TextInput, Checkbox, Radio, Slider, Toggle, Dropdown, Spinbox, Listbox
- [x] Layout: Row, Column, Scroll, Section, Menubar, StatusBar
- [x] Overlay: Modal, ContextMenu, Tooltip, Notification
- [x] Multi-line text: TextArea (editor, log viewer)
- [x] Data widgets: Table (virtual-list), TreeView
- [x] Themes: dark + light with runtime switching
- [ ] Animation: tween, spring, transitions
- [ ] OctoUI Studio: WYSIWYG visual app builder (FOSS, self-hosted)
- [ ] Web platform: WebGPU rendering
- [ ] Android: Vulkan NDK

## Contributing

All contributions welcome. See [CONTRIBUTING.md](CONTRIBUTING.md).

Areas where help is needed: new widgets, platform backends (Linux, web, Android),
documentation, example apps, test coverage.

## License

Apache 2.0 — see [LICENSE](LICENSE)

Built on [OctoFlow](https://github.com/octoflow-lang/octoflow) — the GPU-native
general-purpose language. Designed for the GPU from scratch.
